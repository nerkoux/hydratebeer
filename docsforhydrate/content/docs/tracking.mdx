---
title: What Gets Tracked
description: Learn what performance metrics ğŸº HydrateBeer collects
---

# What Gets Tracked

ğŸº HydrateBeer automatically collects various performance metrics to help you understand your application's behavior.

## ğŸ”„ Automatic Tracking

These metrics are collected automatically when you add `HydrateBeerProvider`:

### âš¡ Hydration Performance

Measures how long it takes for your server-rendered app to become interactive.

**Collected Metrics:**
- **Start Time** - When hydration begins
- **End Time** - When hydration completes
- **Duration** - Total hydration time (milliseconds)
- **Route** - The page being hydrated

**Event Structure:**

```json
{
  "eventType": "hydration",
  "projectId": "proj_abc123...",
  "sessionId": "sess_xyz789...",
  "route": "/dashboard",
  "duration": 342.5,
  "timestamp": "2025-12-06T10:30:00.000Z",
  "metadata": {
    "startTime": 1234567890,
    "endTime": 1234568232
  }
}
```

### ğŸ¨ Component Renders

Tracks performance of individual React components using `React.Profiler`.

**Collected Metrics:**
- **Component Name** - Component being rendered
- **Duration** - Render time (milliseconds)
- **Phase** - Mount, update, or nested-update
- **Slow Render Flag** - If duration exceeds threshold (default 16ms)

**Event Structure:**

```json
{
  "eventType": "render",
  "projectId": "proj_abc123...",
  "sessionId": "sess_xyz789...",
  "componentName": "ProductList",
  "route": "/products",
  "duration": 23.4,
  "timestamp": "2025-12-06T10:30:01.000Z",
  "metadata": {
    "phase": "update",
    "isSlow": true
  }
}
```

### ğŸš€ Route Transitions

Monitors navigation between pages/routes.

**Collected Metrics:**
- **From Route** - Previous page
- **To Route** - New page
- **Duration** - Navigation time (milliseconds)

**Event Structure:**

```json
{
  "eventType": "navigation",
  "projectId": "proj_abc123...",
  "sessionId": "sess_xyz789...",
  "route": "/products",
  "duration": 156.3,
  "timestamp": "2025-12-06T10:30:02.000Z",
  "metadata": {
    "from": "/",
    "to": "/products"
  }
}
```

### ğŸ“Š Page-Level Metrics

Captures browser performance metrics using `PerformanceObserver`.

**Collected Metrics:**
- **Time to Interactive (TTI)** - When page becomes interactive
- **Time to First Byte (TTFB)** - Server response time
- **DOM Content Loaded** - DOM parsing completion
- **Load Complete** - Full page load

**Event Structure:**

```json
{
  "eventType": "page_timing",
  "projectId": "proj_abc123...",
  "sessionId": "sess_xyz789...",
  "route": "/",
  "duration": 1842,
  "timestamp": "2025-12-06T10:30:03.000Z",
  "metadata": {
    "ttfb": 156,
    "domContentLoaded": 890,
    "loadComplete": 1650,
    "type": "navigation"
  }
}
```

## ğŸ› ï¸ Manual Tracking

Use the `useHydrateBeer` hook for custom events:

### Custom Events

Track any application-specific events:

```typescript
'use client';

import { useHydrateBeer } from "hydrate-beer-sdk/react";

export default function CheckoutButton() {
  const { trackCustomEvent } = useHydrateBeer();

  const handleCheckout = async () => {
    const start = performance.now();
    await processCheckout();
    const duration = performance.now() - start;

    trackCustomEvent("checkout_completed", {
      duration,
      itemCount: 3,
      totalPrice: 99.99,
    });
  };

  return <button onClick={handleCheckout}>Checkout</button>;
}
```

### Error Tracking

Track errors with context:

```typescript
'use client';

import { useHydrateBeer } from "hydrate-beer-sdk/react";

export default function DataFetcher() {
  const { trackError } = useHydrateBeer();

  const fetchData = async () => {
    try {
      await api.getData();
    } catch (error) {
      trackError(error, {
        component: "DataFetcher",
        action: "fetchData",
        endpoint: "/api/data",
      });
    }
  };

  return <button onClick={fetchData}>Load Data</button>;
}
```

## ğŸ“‹ Session Information

Every event automatically includes:

| Field | Type | Description |
|-------|------|-------------|
| `projectId` | string | Your unique project ID |
| `sessionId` | string | Anonymous session UUID |
| `timestamp` | string | ISO 8601 timestamp |
| `route` | string | Current page/route |
| `userAgent` | string | Browser user agent |
| `country` | string | Country (if available) |
| `city` | string | City (if available) |

**Session ID Generation:** Uses `crypto.randomUUID()` for secure, anonymous tracking.

## ğŸ”’ What Is NOT Tracked

ğŸº HydrateBeer is privacy-focused and **never** collects:

- âŒ User identity or personal information
- âŒ Component props or state values
- âŒ Form inputs or user data
- âŒ Cookies or authentication tokens
- âŒ IP addresses
- âŒ Business logic or application data
- âŒ Passwords or sensitive information

**Privacy by Design:** Only performance metrics are collected.

## ğŸ“¦ Data Storage & Retention

- **Your Tinybird Account** - You own 100% of your data
- **Retention** - You control retention policies
- **Default** - Tinybird free tier: 90 days (configurable)
- **Export** - Full data export anytime via Tinybird

## ğŸ¯ Sampling

Control data volume with sampling:

```typescript
<HydrateBeerProvider
  config={{
    projectId: "proj_abc123...",
    sampleRate: 0.2, // Track 20% of sessions
  }}
>
  {children}
</HydrateBeerProvider>
```

**How it works:**
- Random sampling per session
- Consistent within session (not per-event)
- `sampleRate: 0.5` = 50% of users tracked

**Recommendations:**
- **Development:** `1.0` (100%)
- **Production:** `0.1` - `0.5` (10-50%)
- **High traffic:** `0.01` (1%)

## âš¡ Batching & Sending

Events are batched for efficiency:

| Setting | Default | Description |
|---------|---------|-------------|
| `batchSize` | 50 | Max events before auto-send |
| `flushInterval` | 5000ms | Auto-send interval |
| Auto-flush | Always | On page unload via `sendBeacon` |

**Example:** Events are sent when either 50 events are collected OR 5 seconds pass.

## ğŸ“ Metric Accuracy

### Hydration Timing
- **API:** `performance.now()`
- **Precision:** ~1ms
- **Measurement:** Start to `requestIdleCallback`

### Render Timing
- **API:** React Profiler
- **Precision:** Sub-millisecond
- **Includes:** Render time + commit time

### Navigation Timing
- **API:** Performance API + Router events
- **Precision:** ~1ms
- **Compatible:** Next.js router, React Router, History API

## ğŸ›¡ï¸ Silent Failures

ğŸº HydrateBeer is designed to **never** break your app:

âœ… Network errors caught and logged  
âœ… Invalid data silently discarded  
âœ… SDK errors never throw or crash  
âœ… All operations wrapped in try/catch  
âœ… Failed sends retry on next batch

**Philosophy:** Observability should never impact user experience.

## ğŸ› Debug Mode

Check browser console for debug logs:

```
ğŸº HydrateBeer: Initialized successfully
ğŸº HydrateBeer: Collected metric { eventType: 'hydration', duration: 342ms }
ğŸº HydrateBeer: Flushing 10 events to Tinybird
ğŸº HydrateBeer: Events sent successfully (200 OK)
```

## ğŸ“Š Data Flow

```
Component Render
    â†“
SDK Collector (batches events)
    â†“
Flush (every 5s or 50 events)
    â†“
Tinybird Events API (NDJSON)
    â†“
Events Datasource
    â†“
Analytics Pipes
    â†“
Monitor Dashboard
```

## ğŸ” Viewing Your Data

### Via Dashboard

```bash
npx hydrate-beer monitor
```

Enter your password to view:
- Total events and sessions
- Average hydration time
- Slow renders count
- Recent events feed

### Via Tinybird UI

1. Login to [ui.tinybird.co](https://ui.tinybird.co)
2. View raw data in `events` datasource
3. Query with SQL or use pipes
4. Export as CSV/JSON

## Next Steps

- [Configuration](/docs/configuration) - Customize sampling and thresholds
- [API Reference](/docs/api) - Full SDK documentation
- [Tinybird Setup](/docs/tinybird) - Advanced Tinybird configuration

- [Configuration](/docs/configuration) - Adjust what gets tracked
- [Component Profiling](/docs/profiling) - Track specific components
- [Tinybird Setup](/docs/tinybird) - View your data
